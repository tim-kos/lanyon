{"version":3,"sources":["../src/config.js"],"names":["_","require","path","utils","shell","fs","ExtractTextPlugin","webpack","webpackDevMiddleware","webpackHotMiddleware","OptimizeCssAssetsPlugin","Visualizer","yaml","AssetsPlugin","WebpackMd5Hash","scrolex","persistOpts","announce","addCommandAsComponent","components","main","module","failure","process","argv","exit","runtime","lanyonDir","join","__dirname","lanyonEnv","env","LANYON_ENV","lanyonPackageFile","lanyonPackage","lanyonVersion","version","profile","LANYON_PROFILE","trace","LANYON_TRACE","publicPath","rubyProvidersOnly","LANYON_ONLY","rubyProvidersSkip","LANYON_SKIP","split","lanyonUpdateGemLockfile","LANYON_UPDATE_GEM_LOCKFILE","lanyonReset","LANYON_RESET","onTravis","TRAVIS","ghPagesEnv","GHPAGES_URL","GHPAGES_BOTNAME","GHPAGES_BOTEMAIL","isDev","attachHMR","indexOf","projectDir","LANYON_PROJECT","PWD","cwd","npmRoot","upwardDirContaining","gitRoot","projectPackageFile","projectPackage","e","gems","defaults","get","lanyon","realpathSync","cacheDir","binDir","recordsPath","assetsSourceDir","assetsBuildDir","contentBuildDir","contentScandir","contentIgnore","jekyllConfig","jekyllConfigPath","buf","readFileSync","safeLoad","themeDir","theme","cmd","z","exec","stdout","allApps","forEach","app","push","getFilename","extension","isChunk","isContent","filename","cfg","entry","dynamicEntries","entries","unshift","common","node","target","output","chunkFilename","devtool","dynamicDevtool","bail","rules","dynamicRules","test","use","loader","options","limit","mimetype","this","jQuery","$","extract","fallback","sourceMap","include","exclude","babelrc","presets","resolve","plugins","cacheDirectory","dynamicPlugins","ProvidePlugin","LoaderOptionsPlugin","debug","context","processOutput","assets","stick","safeDump","lanyon_assets","console","error","Error","message","HotModuleReplacementPlugin","allChunks","DefinePlugin","NODE_ENV","JSON","stringify","optimize","UglifyJsPlugin","compress","warnings","LimitChunkCountPlugin","maxChunks","MinChunkSizePlugin","minChunkSize","ReportErrors","plugin","compilation","asset","errors","length","CommonsChunkPlugin","name","statistics","resolveLoader","modules","descriptionFiles","mainFields","mainFiles","aliasFields","extensions","enforceExtension","enforceModuleExtension","bundler","browsersync","server","port","ports","content","baseDir","dynamicWebRoots","webRoots","extraWebroots","concat","i","substr","middleware","dynamicMiddlewares","middlewares","hot","inline","stats","colors","watchOptions","ignoreInitial","ignored","reloadDelay","files","jekyll","jekyllDevConfigPath","existsSync","dynamicGems","list","LANYON_DISABLE_GEMS","disabled","isEnabled","dynamicExcludes","LANYON_EXCLUDE","dynamicIncludes","LANYON_INCLUDE","nodemon","onChangeOnly","verbose","watch","ignore","ext","exports"],"mappings":"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","file":"config.js","sourcesContent":["const _                       = require('lodash')\nconst path                    = require('path')\nconst utils                   = require('./utils')\nconst shell                   = require('shelljs')\nconst fs                      = require('fs')\nconst ExtractTextPlugin       = require('extract-text-webpack-plugin')\nconst webpack                 = require('webpack')\nconst webpackDevMiddleware    = require('webpack-dev-middleware')\nconst webpackHotMiddleware    = require('webpack-hot-middleware')\n// const BowerWebpackPlugin      = require('bower-webpack-plugin')\nconst OptimizeCssAssetsPlugin = require('optimize-css-assets-webpack-plugin')\nconst Visualizer              = require('webpack-visualizer-plugin')\nconst yaml                    = require('js-yaml')\nconst AssetsPlugin            = require('assets-webpack-plugin')\nconst WebpackMd5Hash          = require('webpack-md5-hash')\nconst scrolex                 = require('scrolex').persistOpts({\n  announce             : true,\n  addCommandAsComponent: true,\n  components           : `lanyon>config`,\n})\n\nif (require.main === module) {\n  scrolex.failure(`Please only used this module via require, or: src/cli.js ${process.argv[1]}`)\n  process.exit(1)\n}\n\nlet runtime = {}\n\nruntime.lanyonDir         = path.join(__dirname, '..')\nruntime.lanyonEnv         = process.env.LANYON_ENV || 'development'\nruntime.lanyonPackageFile = path.join(runtime.lanyonDir, 'package.json')\nconst lanyonPackage       = require(runtime.lanyonPackageFile)\nruntime.lanyonVersion     = lanyonPackage.version\n\nruntime.profile    = process.env.LANYON_PROFILE === '1' || !('LANYON_PROFILE' in process.env)\nruntime.trace      = process.env.LANYON_TRACE === '1'\nruntime.publicPath = '/assets/build/'\n\nruntime.rubyProvidersOnly = (process.env.LANYON_ONLY || '')\nruntime.rubyProvidersSkip = (process.env.LANYON_SKIP || '').split(/\\s+/)\n\nruntime.lanyonUpdateGemLockfile = process.env.LANYON_UPDATE_GEM_LOCKFILE === '1'\nruntime.lanyonReset             = process.env.LANYON_RESET               === '1'\nruntime.onTravis                = process.env.TRAVIS                     === 'true'\nruntime.ghPagesEnv              = {\n  GHPAGES_URL     : process.env.GHPAGES_URL,\n  GHPAGES_BOTNAME : process.env.GHPAGES_BOTNAME,\n  GHPAGES_BOTEMAIL: process.env.GHPAGES_BOTEMAIL,\n}\nruntime.isDev     = runtime.lanyonEnv === 'development'\nruntime.attachHMR = runtime.isDev && process.argv[1].indexOf('browser-sync') !== -1 && process.argv[2] === 'start'\n\nruntime.projectDir = process.env.LANYON_PROJECT || process.env.PWD || process.cwd() // <-- symlinked npm will mess up process.cwd() and point to ~/code/lanyon\n\nruntime.npmRoot = utils.upwardDirContaining('package.json', runtime.projectDir, 'lanyon')\nif (!runtime.npmRoot) {\n  scrolex.failure(`Unable to determine non-lanyon npmRoot, falling back to ${runtime.projectDir}`)\n  runtime.npmRoot = runtime.projectDir\n}\nruntime.gitRoot = utils.upwardDirContaining('.git', runtime.npmRoot)\n\nruntime.projectPackageFile = path.join(runtime.npmRoot, 'package.json')\ntry {\n  var projectPackage = require(runtime.projectPackageFile)\n} catch (e) {\n  projectPackage = {}\n}\n\nruntime.gems = _.defaults(_.get(projectPackage, 'lanyon.gems') || {}, _.get(lanyonPackage, 'lanyon.gems'))\nruntime      = _.defaults(projectPackage.lanyon || {}, lanyonPackage.lanyon, runtime)\n\ntry {\n  runtime.projectDir = fs.realpathSync(runtime.projectDir)\n} catch (e) {\n  runtime.projectDir = fs.realpathSync(`${runtime.gitRoot}/${runtime.projectDir}`)\n}\n\nruntime.cacheDir        = path.join(runtime.projectDir, '.lanyon')\nruntime.binDir          = path.join(runtime.cacheDir, 'bin')\nruntime.recordsPath     = path.join(runtime.cacheDir, 'records.json')\nruntime.assetsSourceDir = path.join(runtime.projectDir, 'assets')\nruntime.assetsBuildDir  = path.join(runtime.assetsSourceDir, 'build')\nruntime.contentBuildDir = path.join(runtime.projectDir, '_site')\nruntime.contentScandir  = path.join(runtime.projectDir, runtime.contentScandir || '.')\nruntime.contentIgnore   = runtime.contentIgnore || []\n\n// Load project's jekyll _config.yml\nruntime.jekyllConfig   = {}\nconst jekyllConfigPath = path.join(runtime.projectDir, '_config.yml')\ntry {\n  const buf            = fs.readFileSync(jekyllConfigPath)\n  runtime.jekyllConfig = yaml.safeLoad(buf)\n} catch (e) {\n  scrolex.failure(`Unable to load ${jekyllConfigPath}`)\n}\n\nruntime.themeDir = false\nif (runtime.jekyllConfig.theme) {\n  const cmd = `${path.join(runtime.binDir, 'bundler')} show ${runtime.jekyllConfig.theme}`\n  const z   = shell.exec(cmd).stdout\n  if (!z) {\n    scrolex.failure(`Unable find defined them \"${runtime.jekyllConfig.theme}\" via cmd: \"${cmd}\"`)\n  } else {\n    runtime.themeDir = z\n  }\n}\n\n// Determine rubyProvider sources to traverse\nconst allApps = [ 'system', 'docker', 'rbenv', 'rvm', 'ruby-shim' ]\nif (runtime.rubyProvidersOnly === 'auto-all') {\n  runtime.rubyProvidersOnly = ''\n}\n\nif (runtime.rubyProvidersOnly) {\n  runtime.rubyProvidersSkip = []\n  allApps.forEach(app => {\n    if (app !== runtime.rubyProvidersOnly) {\n      runtime.rubyProvidersSkip.push(app)\n    }\n  })\n}\n\nfunction getFilename (extension, isChunk, isContent) {\n  let filename = `[name].${extension}`\n\n  if (!runtime.isDev) {\n    filename = `[name].[chunkhash].${extension}`\n    if (isContent) {\n      filename = `[name].[contenthash].${extension}`\n    }\n  }\n\n  if (isChunk) {\n    filename = `[name].[chunkhash].[id].chunk.${extension}`\n  }\n\n  return filename\n}\n\nconst cfg = {\n  webpack: {\n    entry: (function dynamicEntries () {\n      var entries = {}\n      runtime.entries.forEach(entry => {\n        entries[entry] = [ path.join(runtime.assetsSourceDir, `${entry}.js`) ]\n\n        if (entry === 'app' && runtime.isDev) {\n          entries[entry].unshift('webpack-hot-middleware/client')\n        }\n      })\n\n      if (runtime.common) {\n        // e.g.: [ \"jquery\" ]\n        // https://webpack.github.io/docs/code-splitting.html#split-app-and-vendor-code\n        entries.common = runtime.common\n      }\n\n      return entries\n    }()),\n    node: {\n      fs    : 'empty',\n      module: 'empty',\n    },\n    target: 'web',\n    output: {\n      publicPath   : runtime.publicPath,\n      path         : runtime.assetsBuildDir,\n      filename     : getFilename('js'),\n      chunkFilename: getFilename('js', true),\n      // cssFilename  : getFilename('css'),\n    },\n    devtool: (function dynamicDevtool () {\n      // https://webpack.js.org/configuration/devtool/#devtool\n      if (runtime.isDev) {\n        return 'inline-eval-cheap-source-map'\n      }\n\n      return 'source-map'\n    }()),\n    bail  : false, // <-- We use our own ReportErrors plugin as with bail errors details are lost. e.g.: `Error at NormalModule.onModuleBuildFailed`\n    module: {\n      rules: (function dynamicRules () {\n        let rules = [\n          {\n            test: /\\.woff(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            use : [\n              {\n                loader : 'url-loader',\n                options: {\n                  limit   : 10000,\n                  mimetype: 'application/font-woff',\n                },\n              },\n            ],\n          }, {\n            test: /\\.woff2(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            use : [\n              {\n                loader : 'url-loader',\n                options: {\n                  limit   : 10000,\n                  mimetype: 'application/font-woff',\n                },\n              },\n            ],\n          }, {\n            test: /\\.ttf(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            use : [\n              {\n                loader : 'url-loader',\n                options: {\n                  limit   : 10000,\n                  mimetype: 'application/octet-stream',\n                },\n              },\n            ],\n          }, {\n            test: /\\.eot(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            use : [\n              {\n                loader: 'file-loader',\n              },\n            ],\n          }, {\n            test: /\\.cur(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            use : [\n              {\n                loader: 'file-loader',\n              },\n            ],\n          }, {\n            test: /\\.svg(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            use : [\n              {\n                loader : 'url-loader',\n                options: {\n                  limit   : 10000,\n                  mimetype: 'image/svg+xml',\n                },\n              },\n            ],\n          },\n          {\n            test: /\\.coffee$/,\n            use : [\n              {\n                loader: 'coffee-loader',\n              },\n            ],\n          },\n          {\n            test: /\\.(png|gif|jpe?g)$/,\n            use : [\n              {\n                loader : 'url-loader',\n                options: {\n                  limit   : 8096,\n                  mimetype: 'application/octet-stream',\n                },\n              },\n            ],\n          },\n          {\n            // https://github.com/webpack/webpack/issues/512\n            test: /[\\\\/](bower_components)[\\\\/]modernizr[\\\\/]modernizr\\.js$/,\n            use : [\n              // loader: 'imports?this=>window!exports?window.Modernizr',\n              {\n                loader : 'imports-loader',\n                options: {\n                  this: '>window',\n                },\n              },\n              {\n                loader : 'exports-loader',\n                options: {\n                  'window.Modernizr': true,\n                },\n              },\n            ],\n          },\n          {\n            test: /[\\\\/](bower_components)[\\\\/]svgeezy[\\\\/]svgeezy\\.js$/,\n            use : [\n              // loader: 'imports?this=>window!exports?svgeezy',\n              {\n                loader : 'imports-loader',\n                options: {\n                  this: '>window',\n                },\n              },\n              {\n                loader : 'exports-loader',\n                options: {\n                  'svgeezy': true,\n                },\n              },\n            ],\n          },\n          {\n            // https://www.techchorus.net/blog/using-sass-version-of-bootstrap-with-webpack/\n            test: /[\\\\/](bower_components)[\\\\/]bootstrap-sass[\\\\/]assets[\\\\/]javascripts[\\\\/]/,\n            use : [\n              // loader: 'imports?jQuery=jquery,$=jquery,this=>window',\n              {\n                loader : 'imports-loader',\n                options: {\n                  jQuery: 'jquery',\n                  $     : 'jquery',\n                  this  : '>window',\n                },\n              },\n            ],\n          },\n          {\n            test: /[\\\\/]jquery\\..*\\.js$/,\n            use : [\n              // loader: 'imports?jQuery=jquery,$=jquery,this=>window',\n              {\n                loader : 'imports-loader',\n                options: {\n                  jQuery: 'jquery',\n                  $     : 'jquery',\n                  this  : '>window',\n                },\n              },\n            ],\n          },\n        ]\n\n        if (runtime.isDev) {\n          rules.push({\n            test: /\\.css$/,\n            use : [\n              {\n                loader: 'style-loader',\n              },\n              {\n                loader : 'css-loader',\n                options: {\n                  // sourceMap: true,\n                },\n              },\n              {\n                loader: 'resolve-url-loader',\n              },\n            ],\n          })\n          rules.push({\n            test: /\\.scss$/,\n            use : [\n              {\n                loader: 'style-loader',\n              },\n              {\n                loader : 'css-loader',\n                options: {\n                  // sourceMap: true,\n                },\n              },\n              {\n                loader: 'resolve-url-loader',\n              },\n              {\n                loader : 'sass-loader',\n                options: {\n                  // sourceMap: true,\n                },\n              },\n            ],\n          })\n          rules.push({\n            test: /\\.less$/,\n            use : [\n              {\n                loader: 'style-loader',\n              },\n              {\n                loader : 'css-loader',\n                options: {\n                  // sourceMap: true,\n                },\n              },\n              {\n                loader: 'resolve-url-loader',\n              },\n              {\n                loader : 'less-loader',\n                options: {\n                  // sourceMap: true,\n                },\n              },\n            ],\n          })\n        } else {\n          rules.push({\n            test: /\\.css$/,\n            use : ExtractTextPlugin.extract({\n              fallback: 'style-loader',\n              use     : [\n                {\n                  loader : 'css-loader',\n                  options: {\n                    sourceMap: true,\n                  },\n                },\n                {\n                  loader : 'resolve-url-loader',\n                  options: {\n                    sourceMap: true,\n                  },\n                },\n              ],\n            }),\n          })\n          rules.push({\n            test: /\\.scss$/,\n            use : ExtractTextPlugin.extract({\n              fallback: 'style-loader',\n              use     : [\n                {\n                  loader : 'css-loader',\n                  options: {\n                    sourceMap: true,\n                  },\n                },\n                {\n                  loader : 'resolve-url-loader',\n                  options: {\n                    sourceMap: true,\n                  },\n                },\n                {\n                  loader : 'sass-loader',\n                  options: {\n                    sourceMap: true,\n                  },\n                },\n              ],\n            }),\n          })\n          rules.push({\n            test: /\\.less$/,\n            use : ExtractTextPlugin.extract({\n              fallback: 'style-loader',\n              use     : [\n                {\n                  loader : 'css-loader',\n                  options: {\n                    sourceMap: true,\n                  },\n                },\n                {\n                  loader : 'resolve-url-loader',\n                  options: {\n                    sourceMap: true,\n                  },\n                },\n                {\n                  loader : 'less-loader',\n                  options: {\n                    sourceMap: true,\n                  },\n                },\n              ],\n            }),\n          })\n        }\n\n        rules.push({\n          test   : /\\.(js|jsx)$/,\n          include: [\n            `${runtime.assetsSourceDir}`,\n          ],\n          exclude: [\n            `${runtime.assetsSourceDir}/bower_components`,\n            /[\\\\/](node_modules|bower_components|js-untouched)[\\\\/]/,\n          ],\n          use: [\n            // {\n            //   loader : 'react-hot-loader',\n            //   options: {\n            //\n            //   },\n            // },\n            {\n              loader : 'babel-loader',\n              options: {\n                babelrc: true,\n                presets: [\n                  require.resolve('babel-preset-es2015'),\n                  require.resolve('babel-preset-react'),\n                  require.resolve('babel-preset-stage-0'),\n                ],\n                plugins: [\n                  require.resolve('babel-plugin-transform-class-properties'),\n                ],\n                // sourceRoot    : `${runtime.projectDir}`,\n                cacheDirectory: `${runtime.cacheDir}/babelCache`,\n              },\n            },\n          ],\n        })\n        return rules\n      }()),\n    },\n    plugins: (function dynamicPlugins () {\n      let plugins = [\n        // new BowerWebpackPlugin(),\n        new webpack.ProvidePlugin({\n          _     : 'lodash',\n          $     : 'jquery',\n          jQuery: 'jquery',\n        }),\n        // Until loaders are updated one can use the LoaderOptionsPlugin to switch loaders into debug mode:\n        new webpack.LoaderOptionsPlugin({\n          debug  : runtime.isDev,\n          context: runtime.projectDir,\n        }),\n        new AssetsPlugin({\n          filename: 'jekyll.lanyon_assets.yml',\n          path    : runtime.cacheDir,\n          processOutput (assets) {\n            scrolex.stick(`Writing asset manifest to: \"${runtime.cacheDir}/jekyll.lanyon_assets.yml\"`)\n            try {\n              return yaml.safeDump({lanyon_assets: assets})\n            } catch (e) {\n              console.error({assets})\n              throw new Error(`Unable to encode above config to YAML. ${e.message}`)\n            }\n          },\n        }),\n        new WebpackMd5Hash(),\n      ]\n\n      if (runtime.isDev) {\n        plugins.push(new webpack.HotModuleReplacementPlugin())\n      } else {\n        plugins.push(new ExtractTextPlugin({\n          filename : getFilename('css'),\n          allChunks: true,\n        }))\n        // Avoid warning:\n        // Warning: It looks like you're using a minified copy of the development build of React.\n        // When deploying React apps to production, make sure to use the production build which\n        // skips development warnings and is faster. See https://fb.me/react-minification for more details.\n        // https://facebook.github.io/react/docs/optimizing-performance.html#use-the-production-build\n        plugins.push(new webpack.DefinePlugin({\n          'process.env': {\n            NODE_ENV: JSON.stringify('production'),\n          },\n        }))\n        plugins.push(new webpack.optimize.UglifyJsPlugin({\n          compress: {\n            warnings: true,\n          },\n          sourceMap: true,\n          exclude  : /[\\\\/](node_modules|bower_components|js-untouched)[\\\\/]/,\n        }))\n\n        // plugins.push(new webpack.NoErrorsPlugin())\n        plugins.push(new OptimizeCssAssetsPlugin())\n        plugins.push(new webpack.optimize.LimitChunkCountPlugin({maxChunks: 15}))\n        plugins.push(new webpack.optimize.MinChunkSizePlugin({minChunkSize: 10000}))\n        plugins.push(function ReportErrors () {\n          this.plugin('done', ({compilation}) => {\n            for (const asset in compilation.assets) {\n              scrolex.stick(`Wrote ${runtime.assetsBuildDir}/${asset}`)\n            }\n            if (compilation.errors && compilation.errors.length) {\n              scrolex.failure(compilation.errors)\n              if (!runtime.isDev) {\n                process.exit(1)\n              }\n            }\n          })\n        })\n      }\n\n      if (runtime.common) {\n        plugins.push(new webpack.optimize.CommonsChunkPlugin({\n          name    : 'common',\n          filename: getFilename('js'),\n        }))\n      }\n\n      if (!runtime.isDev && runtime.statistics) {\n        // @todo: Once Vizualizer supports multiple entries, add support for that here\n        // https://github.com/chrisbateman/webpack-visualizer/issues/5\n        // Currently it just shows stats for all entries in one graph\n        plugins.push(new Visualizer({\n          filename: runtime.statistics,\n        }))\n      }\n\n      return plugins\n    }()),\n    resolveLoader: {\n      modules: [\n        path.join(runtime.lanyonDir, 'node_modules'),\n        path.join(runtime.npmRoot, 'node_modules'),\n        path.join(runtime.projectDir, 'node_modules'),\n      ],\n    },\n    recordsPath: runtime.recordsPath,\n    resolve    : {\n      modules: [\n        runtime.assetsSourceDir,\n        path.join(runtime.assetsSourceDir, 'bower_components'),\n        path.join(runtime.projectDir, 'node_modules'),\n        path.join(runtime.npmRoot, 'node_modules'),\n        path.join(runtime.lanyonDir, 'node_modules'),\n      ],\n\n      // Enable Bower\n      // These JSON files are read in directories\n      descriptionFiles: ['package.json', 'bower.json'],\n\n      // These fields in the description files are looked up when trying to resolve the package directory\n      mainFields: ['browser', 'main'],\n\n      // These files are tried when trying to resolve a directory\n      mainFiles: ['index'],\n\n      // These fields in the description files offer aliasing in this package\n      // The content of these fields is an object where requests to a key are mapped to the corresponding value\n      aliasFields: ['browser'],\n\n      // These extensions are tried when resolving a file\n      extensions: ['.js', '.json'],\n\n      // If false it will also try to use no extension from above\n      enforceExtension: false,\n\n      // If false it's also try to use no module extension from above\n      enforceModuleExtension: false,\n      // These aliasing is used when trying to resolve a module\n      // alias: {\n      //   jquery: path.resolve(__dirname, 'vendor/jquery-2.0.0.js'),\n      // },\n    },\n  },\n}\n\nif (runtime.attachHMR) {\n  var bundler = webpack(cfg.webpack)\n}\n\ncfg.browsersync = {\n  server: {\n    port   : runtime.ports.content,\n    baseDir: (function dynamicWebRoots () {\n      var webRoots = [ runtime.contentBuildDir ]\n      if (runtime.extraWebroots) {\n        webRoots = webRoots.concat(runtime.extraWebroots)\n      }\n\n      // Turn into absolute paths (e.g. `crmdummy` -> `/Users/kvz/code/content/_site/crmdummy` )\n      for (let i in webRoots) {\n        if (webRoots[i].substr(0, 1) !== '/' && webRoots[i].substr(0, 1) !== '~') {\n          webRoots[i] = `${runtime.contentBuildDir}/${webRoots[i]}`\n        }\n      }\n\n      return webRoots\n    }()),\n    middleware: (function dynamicMiddlewares () {\n      var middlewares = []\n\n      if (runtime.attachHMR) {\n        middlewares.push(webpackDevMiddleware(bundler, {\n          publicPath: runtime.publicPath,\n          hot       : true,\n          inline    : true,\n          stats     : { colors: true },\n        }))\n        middlewares.push(webpackHotMiddleware(bundler))\n      }\n\n      if (!middlewares.length) {\n        return false\n      }\n\n      return middlewares\n    }()),\n    // serveStatic: runtime.themeDir\n  },\n  watchOptions: {\n    ignoreInitial: true,\n    ignored      : [\n      // no need to watch '*.js' here, webpack will take care of it for us,\n      // including full page reloads if HMR won't work\n      '*.js',\n      '.git',\n      'assets/build',\n      '.lanyon',\n    ],\n  },\n  reloadDelay: 200,\n  files      : runtime.contentBuildDir,\n}\n\ncfg.jekyll = {}\n\nconst jekyllDevConfigPath = `${runtime.projectDir}/_config.develop.yml`\nif (runtime.isDev && fs.existsSync(jekyllDevConfigPath)) {\n  try {\n    const buf  = fs.readFileSync(jekyllDevConfigPath)\n    cfg.jekyll = yaml.safeLoad(buf)\n  } catch (e) {\n    scrolex.failure(`Unable to load ${jekyllDevConfigPath}`)\n  }\n}\n\ncfg.jekyll.gems = (function dynamicGems () {\n  let list = []\n\n  if (process.env.LANYON_DISABLE_GEMS) {\n    const disabled = process.env.LANYON_DISABLE_GEMS.split(/\\s*,\\s*/)\n    for (let i in runtime.jekyllConfig.gems) {\n      let isEnabled = disabled.indexOf(runtime.jekyllConfig.gems[i]) === -1\n      if (isEnabled) {\n        list.push(runtime.jekyllConfig.gems[i])\n      }\n    }\n  } else {\n    list = runtime.jekyllConfig.gems\n  }\n\n  if (!list || list.length < 1) {\n    return null\n  }\n\n  return list\n}())\n\ncfg.jekyll.exclude = (function dynamicExcludes () {\n  let list = [\n    'node_modules',\n    'env.sh',\n    'env.*.sh',\n    '.env.sh',\n    '.env.*.sh',\n    '.lanyon',\n  ]\n\n  if (_.get(runtime, 'jekyllConfig.exclude.length') > 0) {\n    list = list.concat(runtime.jekyllConfig.exclude)\n  }\n\n  if ('LANYON_EXCLUDE' in process.env && process.env.LANYON_EXCLUDE !== '') {\n    list = list.concat(process.env.LANYON_EXCLUDE.split(/\\s*,\\s*/))\n  }\n\n  if (!list || list.length < 1) {\n    return null\n  }\n\n  return list\n}())\n\ncfg.jekyll.include = (function dynamicIncludes () {\n  let list = []\n\n  if (_.get(runtime, 'jekyllConfig.include.length') > 0) {\n    list = list.concat(runtime.jekyllConfig.include)\n  }\n\n  if ('LANYON_INCLUDE' in process.env && process.env.LANYON_INCLUDE !== '') {\n    list = list.concat(process.env.LANYON_INCLUDE.split(/\\s*,\\s*/))\n  }\n\n  if (!list || list.length < 1) {\n    return null\n  }\n\n  return list\n}())\n\ncfg.nodemon = {\n  onChangeOnly: true,\n  verbose     : true,\n  watch       : runtime.contentScandir,\n  ignore      : [\n    '_site/**',\n    '.env.*.sh',\n    '.env.sh',\n    '.lanyon/**',\n    'assets/**',\n    'env.*.sh',\n    'env.sh',\n    'node_modules/**',\n    'vendor/**',\n  ].concat(runtime.contentIgnore),\n  ext: [\n    'htm',\n    'html',\n    'jpg',\n    'json',\n    'md',\n    'png',\n    'sh',\n    'yml',\n  ].join(','),\n}\n\ncfg.runtime = runtime\n\nmodule.exports = cfg\n"]}